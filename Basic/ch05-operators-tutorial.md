# 第 5 章：運算子 — 完整教學

本章深入介紹 Python 的算術、比較、邏輯運算子，以及運算子的優先順序。透過逐步教程，你將學會如何正確使用運算子進行計算與條件判斷。

---

## 目錄

1. [什麼是運算子](#1-什麼是運算子)
2. [算術運算子](#2-算術運算子)
3. [比較運算子](#3-比較運算子)
4. [邏輯運算子](#4-邏輯運算子)
5. [賦值與複合賦值運算子](#5-賦值與複合賦值運算子)
6. [運算子優先順序](#6-運算子優先順序)
7. [逐步教程](#7-逐步教程)

---

## 1. 什麼是運算子

**運算子**（Operator）是對一個或多個運算元（operand）執行動作的符號。例如在 `3 + 5` 中：
- `+` 是運算子
- `3` 和 `5` 是運算元
- 結果為 `8`

---

## 2. 算術運算子

用於數學計算，兩個運算元進行運算。

| 運算子 | 名稱 | 說明 | 範例 |
|--------|------|------|------|
| `+` | 加法 | 兩數相加 | `3 + 5` → 8 |
| `-` | 減法 | 兩數相減 | `10 - 4` → 6 |
| `*` | 乘法 | 兩數相乘 | `6 * 7` → 42 |
| `/` | 除法 | 一般除法，結果為浮點數 | `10 / 4` → 2.5 |
| `//` | 整數除法 | 取商的整數部分（向下取整） | `10 // 4` → 2 |
| `%` | 取餘數 | 除法後的餘數 | `10 % 4` → 2 |
| `**` | 次方 | 冪運算 | `2 ** 3` → 8 |

### 重點說明

**`/` vs `//`：**
```python
print(10 / 3)   # 3.3333333333333335  ← 浮點數
print(10 // 3)  # 3                  ← 整數，向下取整
print(-10 // 3) # -4                  ← 向下取整，非 -3
```

**`%` 取餘數應用：**
```python
# 判斷奇偶
print(7 % 2)   # 1 → 奇數
print(8 % 2)   # 0 → 偶數

# 取得個位數
print(1234 % 10)   # 4
```

**字串的 `+` 和 `*`：**
```python
print("Hello" + " " + "World")  # "Hello World"
print("Ha" * 3)                  # "HaHaHa"
```

---

## 3. 比較運算子

用於比較兩個值，回傳布林值（`True` 或 `False`）。

| 運算子 | 名稱 | 說明 | 範例 |
|--------|------|------|------|
| `==` | 等於 | 兩值相等 | `5 == 5` → True |
| `!=` | 不等於 | 兩值不相等 | `5 != 3` → True |
| `>` | 大於 | 左大於右 | `10 > 5` → True |
| `<` | 小於 | 左小於右 | `3 < 7` → True |
| `>=` | 大於等於 | 左大於或等於右 | `5 >= 5` → True |
| `<=` | 小於等於 | 左小於或等於右 | `4 <= 5` → True |

### 注意事項

- `==` 是比較，`=` 是賦值，切勿混淆
- 字串比較依字典序（lexicographical order）
- 不同型別通常無法直接比較（如 `3 == "3"` → False）

```python
print(3 == 3)        # True
print(3 == "3")      # False（型別不同）
print("apple" < "banana")  # True（字典序）
```

---

## 4. 邏輯運算子

用於組合多個布林條件。

| 運算子 | 名稱 | 說明 | 範例 |
|--------|------|------|------|
| `and` | 且 | 兩者皆為 True 才回傳 True | `True and False` → False |
| `or` | 或 | 任一為 True 即回傳 True | `True or False` → True |
| `not` | 非 | 取反 | `not True` → False |

### 真值表

| A | B | A and B | A or B | not A |
|---|---|---------|--------|-------|
| T | T | T | T | F |
| T | F | F | T | F |
| F | T | F | T | T |
| F | F | F | F | T |

### 短路求值（Short-circuit Evaluation）

- `and`：若左側為 False，不會評估右側
- `or`：若左側為 True，不會評估右側

```python
# 常用於避免錯誤
# x and y 若 x 為 0、空字串等，直接回傳 x，不執行 y
```

---

## 5. 賦值與複合賦值運算子

### 賦值運算子 `=`

```python
x = 10
```

### 複合賦值運算子

將運算與賦值合併：

| 運算子 | 等同於 | 範例 |
|--------|--------|------|
| `+=` | `x = x + y` | `x += 5` |
| `-=` | `x = x - y` | `x -= 3` |
| `*=` | `x = x * y` | `x *= 2` |
| `/=` | `x = x / y` | `x /= 2` |
| `//=` | `x = x // y` | `x //= 3` |
| `%=` | `x = x % y` | `x %= 4` |
| `**=` | `x = x ** y` | `x **= 2` |

```python
count = 0
count += 1   # count = 1
count += 1   # count = 2
```

---

## 6. 運算子優先順序

運算時從高到低依序執行（數字越小優先級越高）：

| 優先級 | 運算子 | 說明 |
|--------|--------|------|
| 1 | `()` | 括號（最高優先） |
| 2 | `**` | 次方 |
| 3 | `+x`, `-x`, `not` | 一元正負、邏輯非 |
| 4 | `*`, `/`, `//`, `%` | 乘除、整除、取餘 |
| 5 | `+`, `-` | 加減 |
| 6 | `==`, `!=`, `>`, `<`, `>=`, `<=` | 比較 |
| 7 | `and` | 邏輯且 |
| 8 | `or` | 邏輯或 |
| 9 | `=` | 賦值（最低） |

### 範例計算

```python
# 2 + 3 * 4  →  2 + 12  →  14（先乘後加）
# (2 + 3) * 4  →  5 * 4  →  20（括號優先）
# 2 ** 3 ** 2  →  2 ** 9  →  512（次方由右到左）
```

**建議**：不確定時使用括號，讓意圖更清楚。

---

## 7. 逐步教程

### 步驟 1：建立新檔案

在 `Basic` 資料夾中開啟或建立 `05-operators.py`。

---

### 步驟 2：算術運算子練習

```python
# 步驟 2：算術運算子
a = 10
b = 3

print("=== 算術運算子 ===")
print(f"a = {a}, b = {b}")
print(f"加法 a + b = {a + b}")
print(f"減法 a - b = {a - b}")
print(f"乘法 a * b = {a * b}")
print(f"除法 a / b = {a / b}")
print(f"整數除法 a // b = {a // b}")
print(f"取餘數 a % b = {a % b}")
print(f"次方 a ** b = {a ** b}")
```

執行後確認每行輸出是否符合預期。

---

### 步驟 3：比較 `//` 與 `%`

```python
# 步驟 3：整數除法與取餘數
dividend = 17
divisor = 5

quotient = dividend // divisor   # 商
remainder = dividend % divisor   # 餘數

print(f"\n{dividend} ÷ {divisor} = {quotient} ... 餘 {remainder}")
print(f"驗證: {quotient} * {divisor} + {remainder} = {quotient * divisor + remainder}")
```

---

### 步驟 4：比較運算子練習

```python
# 步驟 4：比較運算子
x = 10
y = 20

print("\n=== 比較運算子 ===")
print(f"x = {x}, y = {y}")
print(f"x == y: {x == y}")
print(f"x != y: {x != y}")
print(f"x > y: {x > y}")
print(f"x < y: {x < y}")
print(f"x >= y: {x >= y}")
print(f"x <= y: {x <= y}")
```

---

### 步驟 5：邏輯運算子練習

```python
# 步驟 5：邏輯運算子
age = 25
has_ticket = True

print("\n=== 邏輯運算子 ===")
print(f"age = {age}, has_ticket = {has_ticket}")

# 條件：年齡 >= 18 且 有票
can_enter = age >= 18 and has_ticket
print(f"可入場（18以上且有票）: {can_enter}")

# 條件：年齡 < 12 或 年齡 >= 65（優惠資格）
is_child = age < 12
is_senior = age >= 65
has_discount = is_child or is_senior
print(f"享有優惠（兒童或長者）: {has_discount}")

# not 取反
print(f"NOT 可入場: {not can_enter}")
```

---

### 步驟 6：複合賦值運算子

```python
# 步驟 6：複合賦值
total = 100

print("\n=== 複合賦值 ===")
print(f"初始 total = {total}")

total += 10
print(f"total += 10  →  {total}")

total -= 5
print(f"total -= 5   →  {total}")

total *= 2
print(f"total *= 2   →  {total}")

total //= 3
print(f"total //= 3  →  {total}")
```

---

### 步驟 7：優先順序練習

```python
# 步驟 7：優先順序
print("\n=== 優先順序 ===")

# 無括號
result1 = 2 + 3 * 4
print(f"2 + 3 * 4 = {result1}  （先乘後加）")

# 有括號
result2 = (2 + 3) * 4
print(f"(2 + 3) * 4 = {result2}  （括號優先）")

# 次方優先於乘除
result3 = 2 * 3 ** 2
print(f"2 * 3 ** 2 = {result3}  （3**2=9，再乘2）")

# 比較與邏輯
result4 = 5 > 3 and 10 < 20
print(f"5 > 3 and 10 < 20 = {result4}")
```

---

### 步驟 8：綜合練習 — 判斷奇偶與整除

```python
# 步驟 8：綜合練習
number = 24

print("\n=== 綜合練習 ===")
print(f"數字: {number}")

# 奇偶判斷（% 2）
is_even = number % 2 == 0
print(f"是否為偶數: {is_even}")

# 是否被 3 整除
divisible_by_3 = number % 3 == 0
print(f"是否被 3 整除: {divisible_by_3}")

# 同時滿足：偶數且被 3 整除
both = is_even and divisible_by_3
print(f"同時為偶數且被 3 整除: {both}")
```

---

### 步驟 9：進階練習（選做）

1. **計算梯形面積**：上底 a、下底 b、高 h，面積 = (a + b) * h / 2
   ```python
   a, b, h = 3, 7, 5
   area = (a + b) * h / 2
   print(f"梯形面積: {area}")
   ```

2. **秒數轉換**：給定總秒數，計算幾小時、幾分、幾秒
   ```python
   total_seconds = 3665
   hours = total_seconds // 3600
   minutes = (total_seconds % 3600) // 60
   seconds = total_seconds % 60
   print(f"{hours} 時 {minutes} 分 {seconds} 秒")
   ```

3. **範圍判斷**：變數 score 在 0–100 之間才視為有效
   ```python
   score = 85
   is_valid = score >= 0 and score <= 100
   # 或使用鏈式比較: 0 <= score <= 100
   ```

---

## 學習檢查清單

完成本章後，請確認：

- [ ] 能正確使用 `+`、`-`、`*`、`/`、`//`、`%`、`**`
- [ ] 能區分 `/`（一般除法）與 `//`（整數除法）
- [ ] 能使用 `%` 判斷奇偶、取得餘數
- [ ] 能使用 `==`、`!=`、`>`、`<`、`>=`、`<=` 進行比較
- [ ] 能使用 `and`、`or`、`not` 組合條件
- [ ] 能使用 `+=`、`-=` 等複合賦值
- [ ] 能理解運算子優先順序，必要時用括號明確運算順序

---

## 常見錯誤

| 錯誤 | 原因 | 解法 |
|------|------|------|
| `3 = x` | 賦值左邊必須是變數 | 改為 `x = 3` |
| 用 `=` 比較 | 混淆賦值與比較 | 比較用 `==` |
| `10 / 0` | 除零錯誤 | 避免除數為 0，或先檢查 |
| 優先順序搞錯 | 未注意乘除先於加減 | 用括號明確意圖 |

---

*本章對應 `05-operators.py`，建議邊閱讀邊在該檔案中實作。*
